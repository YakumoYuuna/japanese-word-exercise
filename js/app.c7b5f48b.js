(function(){"use strict";var e={6821:function(e,t,s){var o=s(5130),i=s(6768);const a={class:""};function l(e,t,s,o,l,n){const u=(0,i.g2)("router-view");return(0,i.uX)(),(0,i.CE)("div",a,[(0,i.bF)(u)])}var n=s(4232);const u={class:"hello"},r=(0,i.Fv)('<p data-v-b9167eee> For a guide and recipes on how to configure / customize this project,<br data-v-b9167eee> check out the <a href="https://cli.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>vue-cli documentation</a>. </p><h3 data-v-b9167eee>Installed CLI Plugins</h3><ul data-v-b9167eee><li data-v-b9167eee><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel" target="_blank" rel="noopener" data-v-b9167eee>babel</a></li><li data-v-b9167eee><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint" target="_blank" rel="noopener" data-v-b9167eee>eslint</a></li></ul><h3 data-v-b9167eee>Essential Links</h3><ul data-v-b9167eee><li data-v-b9167eee><a href="https://vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>Core Docs</a></li><li data-v-b9167eee><a href="https://forum.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>Forum</a></li><li data-v-b9167eee><a href="https://chat.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>Community Chat</a></li><li data-v-b9167eee><a href="https://twitter.com/vuejs" target="_blank" rel="noopener" data-v-b9167eee>Twitter</a></li><li data-v-b9167eee><a href="https://news.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>News</a></li></ul><h3 data-v-b9167eee>Ecosystem</h3><ul data-v-b9167eee><li data-v-b9167eee><a href="https://router.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>vue-router</a></li><li data-v-b9167eee><a href="https://vuex.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>vuex</a></li><li data-v-b9167eee><a href="https://github.com/vuejs/vue-devtools#vue-devtools" target="_blank" rel="noopener" data-v-b9167eee>vue-devtools</a></li><li data-v-b9167eee><a href="https://vue-loader.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>vue-loader</a></li><li data-v-b9167eee><a href="https://github.com/vuejs/awesome-vue" target="_blank" rel="noopener" data-v-b9167eee>awesome-vue</a></li></ul>',7);function c(e,t,s,o,a,l){return(0,i.uX)(),(0,i.CE)("div",u,[(0,i.Lk)("h1",null,(0,n.v_)(s.msg),1),r])}var h={name:"HelloWorld",props:{msg:String}},d=s(1241);const p=(0,d.A)(h,[["render",c],["__scopeId","data-v-b9167eee"]]);var m=p,f={name:"App",components:{HelloWorld:m}};const b=(0,d.A)(f,[["render",l]]);var v=b,g=s(1786),N=(s(2241),s(973));const k={class:"login-container"};function F(e,t,s,o,a,l){const n=(0,i.g2)("van-field"),u=(0,i.g2)("van-button");return(0,i.uX)(),(0,i.CE)("div",k,[(0,i.bF)(n,{modelValue:a.username,"onUpdate:modelValue":t[0]||(t[0]=e=>a.username=e),label:"账号",placeholder:"请输入账号"},null,8,["modelValue"]),(0,i.bF)(n,{modelValue:a.password,"onUpdate:modelValue":t[1]||(t[1]=e=>a.password=e),label:"密码",placeholder:"请输入密码",type:"password"},null,8,["modelValue"]),(0,i.bF)(u,{type:"primary",onClick:l.login1},{default:(0,i.k6)((()=>[(0,i.eW)("登录")])),_:1},8,["onClick"])])}s(4114);var y={data(){return{username:"123",password:"123"}},methods:{login1(){this.$router.push({name:"ReportWork",params:{userId:123}})}}};const C=(0,d.A)(y,[["render",F],["__scopeId","data-v-59fd12db"]]);var w=C;const U={class:"index"},I={key:0,class:"scan"},L=(0,i.Lk)("div",{class:"scan-box"},[(0,i.Lk)("div",{id:"scanning",width:"800px"})],-1),_=(0,i.Lk)("svg",{t:"1681382339822",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2626",width:"200",height:"200"},[(0,i.Lk)("path",{d:"M512 960c-247.039484 0-448-200.960516-448-448S264.960516 64 512 64 960 264.960516 960 512 759.039484 960 512 960zM512 128.287273c-211.584464 0-383.712727 172.128262-383.712727 383.712727 0 211.551781 172.128262 383.712727 383.712727 383.712727 211.551781 0 383.712727-172.159226 383.712727-383.712727C895.712727 300.415536 723.551781 128.287273 512 128.287273z",fill:"#ffffff","p-id":"2627"}),(0,i.Lk)("path",{d:"M557.05545 513.376159l138.367639-136.864185c12.576374-12.416396 12.672705-32.671738 0.25631-45.248112s-32.704421-12.672705-45.248112-0.25631l-138.560301 137.024163-136.447897-136.864185c-12.512727-12.512727-32.735385-12.576374-45.248112-0.063647-12.512727 12.480043-12.54369 32.735385-0.063647 45.248112l136.255235 136.671523-137.376804 135.904314c-12.576374 12.447359-12.672705 32.671738-0.25631 45.248112 6.271845 6.335493 14.496116 9.504099 22.751351 9.504099 8.12794 0 16.25588-3.103239 22.496761-9.247789l137.567746-136.064292 138.687596 139.136568c6.240882 6.271845 14.432469 9.407768 22.65674 9.407768 8.191587 0 16.352211-3.135923 22.591372-9.34412 12.512727-12.480043 12.54369-32.704421 0.063647-45.248112L557.05545 513.376159z",fill:"#ffffff","p-id":"2628"})],-1),x=[_];function S(e,t,s,o,a,l){return(0,i.uX)(),(0,i.CE)("div",U,[a.isScanning?((0,i.uX)(),(0,i.CE)("div",I,[L,(0,i.Lk)("span",{class:"close-scan",onClick:t[0]||(t[0]=(...e)=>l.stopScan&&l.stopScan(...e))},x)])):(0,i.Q3)("",!0),a.isScanning?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("button",{key:1,class:"start-scan",onClick:t[1]||(t[1]=(...e)=>l.startScan&&l.startScan(...e))},"开始扫一扫"))])}var D=s(9143),V={data(){return{isScanning:!1,html5QrCode:null}},created(){},mounted(){},methods:{startScan(){this.isScanning=!0,this.$nextTick((()=>{this.html5QrCode=new D.j9("scanning"),this.html5QrCode.start({facingMode:"environment"},{fps:10,aspectRatio:1,qrbox:{width:280,height:280}},((e,t)=>{this.stopScan(),alert("识别结果"+e)}),(e=>{})).catch((e=>{}))}))},stopScan(){this.html5QrCode.stop().then((()=>{this.isScanning=!1}))}}};const T=(0,d.A)(V,[["render",S]]);var R=T;const $=(0,i.Lk)("h1",null,"REST Countries API Demo",-1);function j(e,t,s,o,a,l){return(0,i.uX)(),(0,i.CE)("div",null,[$,(0,i.Lk)("ul",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.countries,(e=>((0,i.uX)(),(0,i.CE)("li",{key:e.alpha3Code},(0,n.v_)(e.name),1)))),128))])])}var P=s(8355),E={data(){return{countries:[]}},mounted(){this.fetchCountries()},methods:{async fetchCountries(){try{const e=await P.A.get("https://restcountries.com/v3.1/all");this.countries=e.data}catch(e){console.error("Failed to fetch countries",e)}}}};const O=(0,d.A)(E,[["render",j]]);var A=O;const X={class:"main"},B={class:"page"},W={class:"page"},G=(0,i.Lk)("span",null,[(0,i.eW)("报工用户"),(0,i.Lk)("span",{style:{color:"red"}},"*")],-1),M=(0,i.Lk)("span",null,[(0,i.eW)("投入数"),(0,i.Lk)("span",{style:{color:"red"}},"*")],-1),Q=(0,i.Lk)("span",null,[(0,i.eW)("产出数"),(0,i.Lk)("span",{style:{color:"red"}},"*")],-1),z={class:"page"},J={class:"footer"};function K(e,t,s,a,l,n){const u=(0,i.g2)("van-field"),r=(0,i.g2)("van-cell"),c=(0,i.g2)("van-cell-group"),h=(0,i.g2)("van-popup"),d=(0,i.g2)("van-tab"),p=(0,i.g2)("van-tabs"),m=(0,i.g2)("van-search"),f=(0,i.g2)("van-button"),b=(0,i.g2)("van-row"),v=(0,i.g2)("van-col");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",X,[(0,i.bF)(p,null,{default:(0,i.k6)((()=>[(0,i.bF)(d,{title:"基本信息"},{default:(0,i.k6)((()=>[(0,i.Lk)("div",B,[(0,i.bF)(u,{modelValue:l.input,"onUpdate:modelValue":t[0]||(t[0]=e=>l.input=e),label:"流转卡批号",placeholder:"请输入内容",readonly:"",class:"readonly-input","label-class":"readonly-label",disabled:""},null,8,["modelValue"]),(0,i.bF)(u,{modelValue:l.model,"onUpdate:modelValue":t[1]||(t[1]=e=>l.model=e),label:"型号",placeholder:"请输入型号",readonly:"",class:"readonly-input","label-class":"readonly-label",disabled:""},null,8,["modelValue"]),(0,i.bF)(u,{modelValue:l.processNo.name,"onUpdate:modelValue":t[2]||(t[2]=e=>l.processNo.name=e),label:"工序号",placeholder:"请输入工序号","label-class":"readonly-label",onClick:t[3]||(t[3]=e=>l.showprocessNoPopup=!0),readonly:""},null,8,["modelValue"]),(0,i.bF)(h,{show:l.showprocessNoPopup,"onUpdate:show":t[4]||(t[4]=e=>l.showprocessNoPopup=e),position:"bottom"},{default:(0,i.k6)((()=>[(0,i.bF)(c,null,{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.processNoList,(e=>((0,i.uX)(),(0,i.Wv)(r,{key:e.id,title:e.name,onClick:t=>n.selectprocessNo(e)},null,8,["title","onClick"])))),128))])),_:1})])),_:1},8,["show"]),(0,i.bF)(u,{modelValue:l.processingCost,"onUpdate:modelValue":t[5]||(t[5]=e=>l.processingCost=e),label:"加工费",placeholder:"请输入加工费",readonly:"",class:"readonly-input","label-class":"readonly-label",disabled:""},null,8,["modelValue"]),(0,i.bF)(u,{modelValue:l.timingStatusDisplay,"onUpdate:modelValue":t[6]||(t[6]=e=>l.timingStatusDisplay=e),label:"是否计时",placeholder:"请选择",readonly:"",onClick:t[7]||(t[7]=e=>l.showTimingPopup=!0)},null,8,["modelValue"]),(0,i.bF)(h,{show:l.showTimingPopup,"onUpdate:show":t[10]||(t[10]=e=>l.showTimingPopup=e),position:"bottom"},{default:(0,i.k6)((()=>[(0,i.bF)(c,null,{default:(0,i.k6)((()=>[(0,i.bF)(r,{title:"是",onClick:t[8]||(t[8]=e=>n.selectTiming("是","S"))}),(0,i.bF)(r,{title:"否",onClick:t[9]||(t[9]=e=>n.selectTiming("否","F"))})])),_:1})])),_:1},8,["show"])])])),_:1}),(0,i.bF)(d,{title:"",disabled:""}),(0,i.bF)(d,{title:"",disabled:""}),(0,i.bF)(d,{title:"",disabled:""})])),_:1}),(0,i.bF)(p,null,{default:(0,i.k6)((()=>[(0,i.bF)(d,{title:"报工信息"},{default:(0,i.k6)((()=>[(0,i.Lk)("div",W,[(0,i.bF)(u,{modelValue:l.reportUser,"onUpdate:modelValue":t[11]||(t[11]=e=>l.reportUser=e),label:"报工用户",placeholder:"请输入报工用户",onClick:t[12]||(t[12]=e=>l.showUserPopup=!0),readonly:""},{label:(0,i.k6)((()=>[G])),_:1},8,["modelValue"]),(0,i.bF)(h,{show:l.showUserPopup,"onUpdate:show":t[14]||(t[14]=e=>l.showUserPopup=e),position:"bottom"},{default:(0,i.k6)((()=>[(0,i.bF)(m,{modelValue:l.searchUser,"onUpdate:modelValue":t[13]||(t[13]=e=>l.searchUser=e),placeholder:"搜索用户"},null,8,["modelValue"]),(0,i.bF)(c,null,{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.filteredUserList,(e=>((0,i.uX)(),(0,i.Wv)(r,{key:e.id,title:`${e.id}--${e.name}`,onClick:t=>n.selectUser(e)},null,8,["title","onClick"])))),128))])),_:1})])),_:1},8,["show"]),(0,i.bF)(u,{modelValue:l.inputNum,"onUpdate:modelValue":t[15]||(t[15]=e=>l.inputNum=e),type:"number",label:"投入数",placeholder:"请输入投入数",onInput:n.handleOutputNumBlur},{label:(0,i.k6)((()=>[M])),_:1},8,["modelValue","onInput"]),(0,i.bF)(u,{modelValue:l.outputNum,"onUpdate:modelValue":t[16]||(t[16]=e=>l.outputNum=e),type:"number",label:"产出数",placeholder:"请输入产出数",onInput:n.handleOutputNumBlur},{label:(0,i.k6)((()=>[Q])),_:1},8,["modelValue","onInput"])])])),_:1}),(0,i.bF)(d,{title:"",disabled:""}),(0,i.bF)(d,{title:"",disabled:""}),(0,i.bF)(d,{title:"",disabled:""})])),_:1}),(0,i.bF)(p,null,{default:(0,i.k6)((()=>[(0,i.bF)(d,{title:"不良信息"},{default:(0,i.k6)((()=>[(0,i.Lk)("div",z,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.defectiveItems,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{class:"defect-card",key:t},[(0,i.bF)(b,null,{default:(0,i.k6)((()=>[(0,i.bF)(u,{modelValue:e.defectiveItem.name,"onUpdate:modelValue":t=>e.defectiveItem.name=t,label:`不良项目${t+1}`,placeholder:"请选择不良项目",readonly:"",onClick:e=>n.showDefectiveItems(t)},{button:(0,i.k6)((()=>[(0,i.bF)(f,{slot:"button",size:"small",type:"danger",onClick:(0,o.D$)((e=>n.deleteDefectiveItem(t)),["stop"])},{default:(0,i.k6)((()=>[(0,i.eW)("删除")])),_:2},1032,["onClick"])])),_:2},1032,["modelValue","onUpdate:modelValue","label","onClick"])])),_:2},1024),(0,i.bF)(u,{modelValue:e.defectiveNum,"onUpdate:modelValue":t=>e.defectiveNum=t,label:`不良数${t+1}`,type:"number",placeholder:"请输入不良数",onInput:n.calculateDefectiveTotal},null,8,["modelValue","onUpdate:modelValue","label","onInput"])])))),128)),(0,i.bF)(h,{show:l.showPopup,"onUpdate:show":t[17]||(t[17]=e=>l.showPopup=e),position:"bottom"},{default:(0,i.k6)((()=>[(0,i.bF)(c,null,{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.defectiveItemList,(e=>((0,i.uX)(),(0,i.Wv)(r,{key:e.id,title:e.name,onClick:t=>n.selectDefectiveItem(e)},null,8,["title","onClick"])))),128))])),_:1})])),_:1},8,["show"])])])),_:1}),(0,i.bF)(d,{title:"",disabled:""}),(0,i.bF)(d,{title:"不良总数：",disabled:""}),(0,i.bF)(d,{title:l.defectiveTotal,disabled:""},null,8,["title"])])),_:1})]),(0,i.Lk)("div",J,[(0,i.bF)(b,null,{default:(0,i.k6)((()=>[(0,i.bF)(v,{span:"8"},{default:(0,i.k6)((()=>[(0,i.bF)(f,{type:"success",onClick:n.addDefectiveItem},{default:(0,i.k6)((()=>[(0,i.eW)("新增不良")])),_:1},8,["onClick"])])),_:1}),(0,i.bF)(v,{span:"8"}),(0,i.bF)(v,{span:"8"},{default:(0,i.k6)((()=>[(0,i.bF)(f,{type:"primary",onClick:n.showConfirmDialog},{default:(0,i.k6)((()=>[(0,i.eW)("提交报工")])),_:1},8,["onClick"])])),_:1})])),_:1})])],64)}var q={data(){return{types:{FfetchUserData:!1,FfetchprocessNoData:!1},successCounter:0,apiURL:"http://221.229.218.149:8890",input:"24062809",model:"NTSA2B104F3999",processNo:"",inputNum:"",outputNum:"",defectiveTotal:"",reportUser:"",processingCost:"0",defectiveItems:[],showPopup:!1,searchUser:"",defectiveItemList:[{id:"0001",name:"不良项目1"},{id:"0002",name:"不良项目2"}],userList:[{id:"0001",name:"用户1"},{id:"0002",name:"用户2"}],processNoList:[{id:"0001",name:"工序1"},{id:"0002",name:"工序2"}],showUserPopup:!1,showprocessNoPopup:!1,flag:2,efficiency:0,wageCoefficient:0,timingStatus:"F",timingStatusDisplay:"否",showTimingPopup:!1}},created(){if(Object.keys(this.$route.query).length>0&&(this.input=this.$route.query.fid,this.model=this.$route.query.xh,this.processingCost=this.$route.query.jgf),this.input){const e=localStorage.getItem("selectedUser");if(e)for(const t of this.userList){const[s,o]=JSON.parse(e).split("--");t.id===s&&(this.reportUser=JSON.parse(e))}this.fetchUserData(),this.fetchprocessNoData()}},watch:{types:{deep:!0,handler(e){const t=Object.values(e).every((e=>!0===e));if(console.log(this.types),t&&2===this.successCounter){this.processNo=this.processNoList[0];const e={number:this.input,gxh:this.processNo.id},t=P.A.create({baseURL:this.apiURL,timeout:1e4});t.post("/GetTRS",e).then((e=>{this.inputNum=e.data})).catch((e=>{console.error("加工费接口调用失败"),console.error(e)}));const s={number:this.input,gxh:this.processNo.id},o=P.A.create({baseURL:this.apiURL,timeout:1e4});o.post("/GetGF",s).then((e=>{e.data&&(this.efficiency=e.data.gshsl,this.wageCoefficient=e.data.gzxs,this.flag=e.data.sf,"0"===this.flag&&""!==this.inputNum?this.processingCost=(this.inputNum/this.efficiency*this.wageCoefficient).toFixed(2):"1"===this.flag&&""!==this.outputNum&&(this.processingCost=(this.outputNum/this.efficiency*this.wageCoefficient).toFixed(2)))})).catch((e=>{console.error("加工费接口调用失败"),console.error(e)}))}else t||2!==this.successCounter||this.$dialog.alert({title:"提示",message:"接口调用失败，请重试",confirmButtonText:"确定"})}}},computed:{filteredUserList(){return this.userList.filter((e=>e.id.includes(this.searchUser)||e.name.includes(this.searchUser)))}},methods:{fetchUserData(){const e=P.A.create({baseURL:this.apiURL,timeout:5e3});e.get("/GetYh").then((e=>{if(e.data&&e.data.length>0){const t=e.data.map((e=>({id:e.id,name:e.name})));this.userList=t,this.types.FfetchUserData=!0,this.successCounter++;const s=localStorage.getItem("selectedUser");if(s)for(const e of this.userList){const[t]=JSON.parse(s).split("--");e.id===t&&(this.reportUser=JSON.parse(s))}}else this.types.FfetchUserData=!1,this.successCounter++})).catch((e=>{console.error("失败"),console.error(e),this.types.FfetchUserData=!1,this.successCounter++}))},fetchdefectiveItemData(){const e=P.A.create({baseURL:this.apiURL,timeout:5e3});e.get("/GetBlp").then((e=>{if(e.data&&e.data.length>0){const t=e.data.map((e=>({id:e.id,name:e.name})));this.defectiveItemList=t,this.types.FfetchdefectiveItemData=!0,this.successCounter++}else this.types.FfetchdefectiveItemData=!1,this.successCounter++})).catch((e=>{console.error("失败"),console.error(e),this.types.FfetchdefectiveItemData=!1,this.successCounter++}))},fetchprocessNoData(){const e={number:this.input},t=P.A.create({baseURL:this.apiURL,timeout:1e4});t.post("/GetGXH",e).then((e=>{if(e.data&&e.data.length>0){const t=e.data.map((e=>({id:e.id,name:e.name})));this.processNoList=t,this.types.FfetchprocessNoData=!0,this.successCounter++}else this.types.FfetchprocessNoData=!1,this.successCounter++})).catch((e=>{console.error("失败"),console.error(e),this.types.FfetchprocessNoData=!1,this.successCounter++}))},showDefectiveItems(e){if(this.processNo.id){const t={number:this.input,gxh:this.processNo.id},s=P.A.create({baseURL:this.apiURL,timeout:1e4});s.post("/GetBlp",t).then((t=>{if(t.data.length>0){const s=t.data.map((e=>({id:e.id,name:e.name})));this.defectiveItemList=s,this.showPopup=!0,this.popupIndex=e}else this.$dialog.alert({title:"提示",message:"无法获取对应工序号的不良项目",confirmButtonText:"确定"})})).catch((e=>{console.error("失败"),console.error(e),this.$dialog.alert({title:"提示",message:"接口调用失败，请重试",confirmButtonText:"确定"})}))}else this.$dialog.alert({title:"提示",message:"工序号不能为空",confirmButtonText:"确定"})},selectDefectiveItem(e){this.defectiveItems[this.popupIndex].defectiveItem=e,this.showPopup=!1},addDefectiveItem(){this.defectiveItems.length;this.defectiveItems.push({defectiveItem:"",defectiveNum:""})},clearDefectiveItem(){this.defectiveItems.length>0?this.defectiveItems.pop():alert("无可清除的不良项目")},selectUser(e){this.reportUser=`${e.id}--${e.name}`,this.showUserPopup=!1,localStorage.setItem("selectedUser",JSON.stringify(this.reportUser)),this.searchUser=""},selectprocessNo(e){this.processNo=e,this.showprocessNoPopup=!1;const t={number:this.input,gxh:this.processNo.id},s=P.A.create({baseURL:this.apiURL,timeout:1e4});s.post("/GetTRS",t).then((e=>{this.inputNum=e.data})).catch((e=>{console.error("加工费接口调用失败"),console.error(e)}));const o={number:this.input,gxh:this.processNo.id},i=P.A.create({baseURL:this.apiURL,timeout:1e4});i.post("/GetGF",o).then((e=>{e.data&&(this.efficiency=e.data.gshsl,this.wageCoefficient=e.data.gzxs,this.flag=e.data.sf,"0"===this.flag&&""!==this.inputNum?this.processingCost=(this.inputNum/this.efficiency*this.wageCoefficient).toFixed(2):"1"===this.flag&&""!==this.outputNum&&(this.processingCost=(this.outputNum/this.efficiency*this.wageCoefficient).toFixed(2)))})).catch((e=>{console.error("加工费接口调用失败"),console.error(e)}))},clear(){this.processNo="",this.inputNum="",this.outputNum="",this.defectiveTotal="",this.reportUser="",this.defectiveItems=[]},confirm(){},removeDefectiveItem(e){this.defectiveItems.splice(e,1)},handleOutputNumBlur(){this.outputNum=Number(this.outputNum),this.inputNum=Number(this.inputNum),this.outputNum>this.inputNum&&(this.outputNum=this.inputNum);let e=0;this.defectiveItems.forEach((t=>{t.defectiveNum&&(e+=Number(t.defectiveNum))})),this.defectiveTotal=`${e}/${this.inputNum-this.outputNum}`,"0"===this.flag&&""!==this.inputNum?this.processingCost=(this.inputNum/this.efficiency*this.wageCoefficient).toFixed(2):"1"===this.flag&&""!==this.outputNum&&(this.processingCost=(this.outputNum/this.efficiency*this.wageCoefficient).toFixed(2))},showConfirmDialog(){this.$dialog.confirm({message:"确定要提交吗？",confirmButtonText:"确定",cancelButtonText:"取消"}).then((()=>{this.validateForm()&&this.submitData()})).catch((()=>{}))},calculateDefectiveTotal(){let e=0;this.defectiveItems.forEach((t=>{t.defectiveNum&&(e+=Number(t.defectiveNum))}));this.inputNum&&Number(this.inputNum),this.outputNum&&Number(this.outputNum);this.defectiveTotal=`${e}/${this.inputNum-this.outputNum}`},deleteDefectiveItem(e){this.defectiveItems.splice(e,1)},submitData(){this.$toast.loading({duration:0,message:"提交中..."});let e=this.reportUser,t=e.split("--"),s=t[0];const o={GxJhNumber:this.input,model:this.model,GXH:this.processNo.id,F_QJEG_sfjs:this.timingStatus,inputNum:this.inputNum,FQuaQty:this.outputNum,FProcessFailQty:Number(this.inputNum)-Number(this.outputNum),FStaffNumber:s,processingCost:this.processingCost,FSubEntity:this.defectiveItems.map((e=>({FOperDefectQty:e.defectiveNum,FDefectReasonId:{FNUMBER:e.defectiveItem.id}})))};console.log(o);const i=P.A.create({baseURL:this.apiURL,timeout:2e4});i.post("/BYtest",o).then((e=>{console.log(e),"200"===e.data.status?this.$dialog.alert({title:"提示",message:"报工成功",confirmButtonText:"确定"}):this.$dialog.alert({title:"提示",message:"报工失败，请重试",confirmButtonText:"确定"})})).catch((e=>{this.$dialog.alert({title:"提示",message:"报工失败，请重试",confirmButtonText:"确定"})})).finally((()=>{this.$toast.clear()}))},validateForm(){if(!this.input||!this.model||!this.processNo||!this.inputNum||!this.outputNum||!this.reportUser||!this.processingCost)return this.$toast("流转卡批号、型号、工序号、投入数、产出数、报工用户、加工费不能为空"),!1;if(""!==this.defectiveTotal){const e=this.defectiveItems.reduce(((e,t)=>e+Number(t.defectiveNum||0)),0);if(e!==Number(this.inputNum)-Number(this.outputNum))return this.$toast("不良总数与不良项目的数量总和不一致"),!1}return!0},handleSearchUser(e){this.searchUser=e},formatInputNum(){this.inputNum=Math.abs(this.inputNum),this.inputNum=Number(this.inputNum.toFixed(2)),this.inputNum===Math.floor(this.inputNum)&&(this.inputNum=Math.floor(this.inputNum))},formatoutputNum(){this.outputNum=Math.abs(this.outputNum),this.outputNum=Number(this.outputNum.toFixed(2)),this.outputNum===Math.floor(this.outputNum)&&(this.outputNum=Math.floor(this.outputNum))},selectTiming(e,t){this.timingStatus=t,this.timingStatusDisplay=e,this.showTimingPopup=!1}},mounted(){}};const H=(0,d.A)(q,[["render",K]]);var Y=H;const Z=[{path:"/login",name:"Login",component:w},{path:"/text2",name:"Text2",component:R},{path:"/text3",name:"Text3",component:A},{path:"/ReportWork",name:"ReportWork",component:Y},{path:"/",redirect:"/ReportWork"}],ee=(0,N.aE)({history:(0,N.LA)(),routes:Z});var te=ee;const se=(0,o.Ef)(v);se.use(g.Ay),se.use(te),se.mount("#app")}},t={};function s(o){var i=t[o];if(void 0!==i)return i.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,s),a.exports}s.m=e,function(){var e=[];s.O=function(t,o,i,a){if(!o){var l=1/0;for(c=0;c<e.length;c++){o=e[c][0],i=e[c][1],a=e[c][2];for(var n=!0,u=0;u<o.length;u++)(!1&a||l>=a)&&Object.keys(s.O).every((function(e){return s.O[e](o[u])}))?o.splice(u--,1):(n=!1,a<l&&(l=a));if(n){e.splice(c--,1);var r=i();void 0!==r&&(t=r)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[o,i,a]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var i,a,l=o[0],n=o[1],u=o[2],r=0;if(l.some((function(t){return 0!==e[t]}))){for(i in n)s.o(n,i)&&(s.m[i]=n[i]);if(u)var c=u(s)}for(t&&t(o);r<l.length;r++)a=l[r],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(c)},o=self["webpackChunktelegrapher"]=self["webpackChunktelegrapher"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[504],(function(){return s(6821)}));o=s.O(o)})();
//# sourceMappingURL=app.c7b5f48b.js.map